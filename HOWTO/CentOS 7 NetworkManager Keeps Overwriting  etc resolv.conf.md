CentOS 7 NetworkManager Keeps Overwriting /etc/resolv.conf
==========================================================

[Mattias Geniar](safari-reader://ma.ttias.be/)

Mattias Geniar, September 01, 2015

Follow me on Twitter as [@mattiasgeniar](https://twitter.com/mattiasgeniar)

In CentOS or Red Hat Enterprise Linux (RHEL) 7, you can find your `/etc/resolv.conf` file, which holds all nameserver configurations for your server, to be overwritten by the NetworkManager.

If you check the content of `/etc/resolv.conf`, it may look like this.

    $ cat /etc/resolv.conf
    # Generated by NetworkManager
    search mydomain.tld
    nameserver 8.8.8.8

The NetworkManager will assume it has the rights to control `/etc/resolv.conf`, if it finds a DNS related configuration in your interface configuration file.

    $ grep DNS /etc/sysconfig/network-scripts/ifcfg-*
    DNS1="8.8.8.8"
    IPV6_PEERDNS="yes"

To prevent Network Manager to overwrite your `resolv.conf` changes, remove the DNS1, DNS2, â€¦ lines from `/etc/sysconfig/network-scripts/ifcfg-*`.

Now, you can manually change the `/etc/resolv.conf` file again, and you should be good to go. NetworkManager will no longer overwrite your DNS nameserver configurations.